<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PDF2Booklet</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <link href="style.css" rel="stylesheet"/>
</head>
<body class="bg-light">
  <div class="card shadow-sm" style="max-width: 640px; width: 100%;">
    <div class="card-body">
      <h2 class="card-title text-center mb-4"><i class="fas fa-book-open"></i> PDF2Booklet</h2>

      <div class="mb-3">
        <label class="form-label"><i class="fas fa-file-pdf me-2"></i>Select PDF:</label>
        <input class="form-control" type="file" id="fileInput" accept="application/pdf"/>
        <div id="fileName" class="mt-1 text-secondary"></div>
      </div>

      <div class="mb-3">
        <label class="form-label"><i class="fas fa-key me-2"></i>Password (if protected):</label>
        <input class="form-control" type="password" id="passwordInput" placeholder="PDF password (optional)"/>
      </div>

      <div class="form-check mb-3">
        <input class="form-check-input" type="checkbox" id="flattenCheckbox">
        <label class="form-check-label" for="flattenCheckbox">
          <i class="fas fa-compress-arrows-alt me-1"></i> Flatten PDF if encrypted (may reduce quality)
        </label>
      </div>


      <button id="generateBtn" class="btn btn-primary w-100 mb-2">
        <i class="fas fa-print me-2"></i>Generate Booklet
      </button>

      <button id="viewBtn" class="btn btn-outline-secondary w-100 mb-3">
        <i class="fas fa-eye me-2"></i>View Generated PDF
      </button>

      <div id="progressContainer" class="progress">
        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar"></div>
      </div>
      <div id="progressText" class="text-center text-muted mt-2"></div>
      <div id="errorMsg" class="text-danger mt-3"></div>

      <div id="decryptHelp" class="alert alert-warning mt-3" style="display: none;">
        <h5 class="alert-heading"><i class="fas fa-lock me-2"></i>Decryption Tips</h5>
        <p>If this PDF is password-protected and flattening fails or is disabled, try:</p>
        <ul class="mb-0 ps-3">
          <li>Open the PDF on your computer and re-save it using <strong>Microsoft Print to PDF</strong> â€” this removes encryption and may reduce file size without noticeable quality loss.</li>
          <li>Use a PDF editor like <strong>Foxit PDF Editor</strong> to manually remove password protection.</li>
          <li>Use an online tool such as <a href="https://www.ilovepdf.com/unlock_pdf" target="_blank" rel="noopener noreferrer">iLovePDF Unlock PDF ðŸ”—</a> to unlock the file automatically.</li>
        </ul>
      </div>

      <div id="printInstructions" class="alert alert-info mt-4">
        <h5 class="alert-heading"><i class="fas fa-print me-2"></i>How to Print the Booklet</h5>
        <ul class="mb-0 ps-3">
          <li><strong>Layout:</strong> Landscape</li>
          <li><strong>Pages per sheet:</strong> 2</li>
          <li><strong>Duplex:</strong> Double-sided (Flip on <strong>long edge</strong>)</li>
          <li><strong>Page size:</strong> A4 (210mm x 297mm)</li>
          <li><strong>Binding:</strong> Fold and staple in the center</li>
        </ul>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
